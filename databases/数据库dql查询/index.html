<!DOCTYPE html>
<html lang="en-us">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <script type="text/javascript" src="https://latest.cactus.chat/cactus.js"></script>
  <link rel="stylesheet" href="https://latest.cactus.chat/style.css" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> 数据库DQL查询 | self-salvation</title>
  <link rel = 'canonical' href = 'https://jinkes-li.github.io/databases/%E6%95%B0%E6%8D%AE%E5%BA%93dql%E6%9F%A5%E8%AF%A2/'>
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="数据库DQL查询" />
<meta property="og:description" content="MySQL数据库查询关键字 接下来会通过mysql的关键字来演示在数据库中如何对数据查询
mysql中的内置方法可以使用 &lsquo;help function&rsquo;来查看使用方式
常用的mysql 查询相关关键字 数据库查询（DQL）
-- 语法 select 字段列表 from 表名列表 where 条件列表 group by 分组字段列表 having 过滤列表 distinct 去重列表 order by 排序字段列表 limit 分页 regexp 正则匹配关键字 &#34;&#34;&#34; DQL执行顺序 FROM -&gt; WHERE -&gt; GROUP BY -&gt; SELECT -&gt; ORDER BY -&gt; LIMIT &#34;&#34;&#34; 多表查询的两种方式 子查询 连表查询 基础查询 查询多个字段 -- 查询多个字段 select field1, field2.... from tablename; or select * from tablename; -- 设置别名 select field1 as a1, field2 as a2,." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jinkes-li.github.io/databases/%E6%95%B0%E6%8D%AE%E5%BA%93dql%E6%9F%A5%E8%AF%A2/" /><meta property="article:section" content="databases" />
<meta property="article:published_time" content="2022-11-25T20:20:46+08:00" />
<meta property="article:modified_time" content="2022-11-25T20:20:46+08:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="数据库DQL查询"/>
<meta name="twitter:description" content="MySQL数据库查询关键字 接下来会通过mysql的关键字来演示在数据库中如何对数据查询
mysql中的内置方法可以使用 &lsquo;help function&rsquo;来查看使用方式
常用的mysql 查询相关关键字 数据库查询（DQL）
-- 语法 select 字段列表 from 表名列表 where 条件列表 group by 分组字段列表 having 过滤列表 distinct 去重列表 order by 排序字段列表 limit 分页 regexp 正则匹配关键字 &#34;&#34;&#34; DQL执行顺序 FROM -&gt; WHERE -&gt; GROUP BY -&gt; SELECT -&gt; ORDER BY -&gt; LIMIT &#34;&#34;&#34; 多表查询的两种方式 子查询 连表查询 基础查询 查询多个字段 -- 查询多个字段 select field1, field2.... from tablename; or select * from tablename; -- 设置别名 select field1 as a1, field2 as a2,."/>

  
  
    
  
  
  <link rel="stylesheet" href="https://jinkes-li.github.io/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css" integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://jinkes-li.github.io/images/favicon.ico" />

  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

    <header id="header">
  <a href="https://jinkes-li.github.io/">
  
    <div id="logo" style="background-image: url(https://jinkes-li.github.io/images/logo.png)"></div>
  
  <div id="title">
    <h1>self-salvation</h1>
  </div>
  </a>
  <div id="nav">
    <ul>
      <li class="icon">
        <a href="#" aria-label="Menu"><i class="fas fa-bars fa-2x" aria-hidden="true"></i></a>
      </li>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/posts/">All posts</a></li>
      
        <li><a href="/tags">Tags</a></li>
      
        <li><a href="/python">Python</a></li>
      
        <li><a href="/databases">databases</a></li>
      
        <li><a href="/about">About</a></li>
      
    </ul>
  </div>
</header>



    
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <div class="content" itemprop="articleBody">
  
    <h3 id="mysql数据库查询关键字">MySQL数据库查询关键字</h3>
<p>接下来会通过mysql的关键字来演示在数据库中如何对数据查询</p>
<blockquote>
<p>mysql中的内置方法可以使用 &lsquo;help function&rsquo;来查看使用方式</p>
</blockquote>
<ul>
<li>常用的mysql 查询相关关键字</li>
</ul>
<p>数据库查询（DQL）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#75715e">-- 语法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">字段列表</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">表名列表</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">条件列表</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">分组字段列表</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">having</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">过滤列表</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">distinct</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">去重列表</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">排序字段列表</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">limit</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">分页</span>
</span></span><span style="display:flex;"><span>regexp
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">正则匹配关键字</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">DQL执行顺序
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">FROM -&gt; WHERE -&gt; GROUP BY -&gt; SELECT -&gt; ORDER BY -&gt; LIMIT
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</span></span></code></pre></div><ul>
<li>多表查询的两种方式</li>
</ul>
<ol>
<li>子查询</li>
<li>连表查询</li>
</ol>
<ul>
<li>基础查询</li>
</ul>
<ol>
<li>查询多个字段</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#75715e">-- 查询多个字段
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> field1, field2.... <span style="color:#66d9ef">from</span> tablename; 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">or</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> tablename;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 设置别名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> field1 <span style="color:#66d9ef">as</span> a1, field2 <span style="color:#66d9ef">as</span> a2,....<span style="color:#66d9ef">from</span> tablename;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">or</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> field1 a1, field2 <span style="color:#66d9ef">as</span> a2,... <span style="color:#66d9ef">from</span> tablename;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 去除重复记录
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">distinct</span> fieldlist <span style="color:#66d9ef">from</span> tablename;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 转义
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> tablename <span style="color:#66d9ef">where</span> name <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;/_张三/&#39;</span><span style="color:#66d9ef">escape</span><span style="color:#e6db74">&#39;/&#39;</span>
</span></span></code></pre></div><ul>
<li>条件查询</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#75715e">-- grammar
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> fieldlist <span style="color:#66d9ef">from</span> tablename <span style="color:#66d9ef">where</span> condition_list;
</span></span></code></pre></div><table>
<thead>
<tr>
<th>比较运算符</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>&gt;</td>
<td>大于</td>
</tr>
<tr>
<td>&gt;=</td>
<td>大于等于</td>
</tr>
<tr>
<td>&lt;</td>
<td>小于</td>
</tr>
<tr>
<td>&lt;=</td>
<td>小于等于</td>
</tr>
<tr>
<td>=</td>
<td>等于</td>
</tr>
<tr>
<td>&lt;&gt; 或 !=</td>
<td>不等于</td>
</tr>
<tr>
<td>BETWEEN&hellip;.AND&hellip;</td>
<td>在某个范围内（含最小，最大值）</td>
</tr>
<tr>
<td>IN (&hellip;)</td>
<td>在in之后的列表中的值，多选一</td>
</tr>
<tr>
<td>LIKE 占位符</td>
<td>模糊匹配（_匹配单个字符，%匹配任意字符）</td>
</tr>
<tr>
<td>IS NULL</td>
<td>是NULL</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>逻辑运算符</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>AND 或 &amp;&amp;</td>
<td>并且（多个条件同时成立）</td>
</tr>
<tr>
<td>OR 或 ||</td>
<td>或者（多个条件任意成立一个）</td>
</tr>
<tr>
<td>NOT 或 ！</td>
<td>非，不是</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>函数</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>统计数量</td>
</tr>
<tr>
<td>max</td>
<td>最大值</td>
</tr>
<tr>
<td>min</td>
<td>最小值</td>
</tr>
<tr>
<td>sum</td>
<td>求和</td>
</tr>
<tr>
<td>avg</td>
<td>平均值</td>
</tr>
</tbody>
</table>
<p>代码实际应用</p>
<blockquote>
<ol>
<li>数据准备</li>
<li>查询使用</li>
</ol>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">准备一张员工数据表，并写入测试数据
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> emp(
</span></span><span style="display:flex;"><span>    id int <span style="color:#66d9ef">primary</span> <span style="color:#66d9ef">key</span> auto_increment,
</span></span><span style="display:flex;"><span>    name varchar(<span style="color:#ae81ff">36</span>) <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>    gender enum(<span style="color:#e6db74">&#39;male&#39;</span>,<span style="color:#e6db74">&#39;female&#39;</span>) <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span>, <span style="color:#66d9ef">default</span> <span style="color:#e6db74">&#39;male&#39;</span>,
</span></span><span style="display:flex;"><span>    age int(<span style="color:#ae81ff">3</span>) unsigned <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span> <span style="color:#66d9ef">default</span> <span style="color:#ae81ff">28</span>,
</span></span><span style="display:flex;"><span>    hire_date date <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>    post varchar(<span style="color:#ae81ff">50</span>),
</span></span><span style="display:flex;"><span>    post_comment varchar(<span style="color:#ae81ff">100</span>),
</span></span><span style="display:flex;"><span>    salary double(<span style="color:#ae81ff">15</span>,<span style="color:#ae81ff">2</span>),
</span></span><span style="display:flex;"><span>    office int,
</span></span><span style="display:flex;"><span>    depart_id int
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">插入记录
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">三个部门：教学，销售，运营
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> emp(name,gender,age,hire_date,post,salary,office,depart_id) <span style="color:#66d9ef">values</span>
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;jason&#39;</span>,<span style="color:#e6db74">&#39;male&#39;</span>,<span style="color:#ae81ff">18</span>,<span style="color:#e6db74">&#39;20170301&#39;</span>,<span style="color:#e6db74">&#39;浦东第一帅形象代言&#39;</span>,<span style="color:#ae81ff">7300</span>.<span style="color:#ae81ff">33</span>,<span style="color:#ae81ff">401</span>,<span style="color:#ae81ff">1</span>), <span style="color:#75715e">-- 以下是教学部
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>(<span style="color:#e6db74">&#39;tom&#39;</span>,<span style="color:#e6db74">&#39;male&#39;</span>,<span style="color:#ae81ff">78</span>,<span style="color:#e6db74">&#39;20150302&#39;</span>,<span style="color:#e6db74">&#39;teacher&#39;</span>,<span style="color:#ae81ff">1000000</span>.<span style="color:#ae81ff">31</span>,<span style="color:#ae81ff">401</span>,<span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;kevin&#39;</span>,<span style="color:#e6db74">&#39;male&#39;</span>,<span style="color:#ae81ff">81</span>,<span style="color:#e6db74">&#39;20130305&#39;</span>,<span style="color:#e6db74">&#39;teacher&#39;</span>,<span style="color:#ae81ff">8300</span>,<span style="color:#ae81ff">401</span>,<span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;tony&#39;</span>,<span style="color:#e6db74">&#39;male&#39;</span>,<span style="color:#ae81ff">73</span>,<span style="color:#e6db74">&#39;20140701&#39;</span>,<span style="color:#e6db74">&#39;teacher&#39;</span>,<span style="color:#ae81ff">3500</span>,<span style="color:#ae81ff">401</span>,<span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;owen&#39;</span>,<span style="color:#e6db74">&#39;male&#39;</span>,<span style="color:#ae81ff">28</span>,<span style="color:#e6db74">&#39;20121101&#39;</span>,<span style="color:#e6db74">&#39;teacher&#39;</span>,<span style="color:#ae81ff">2100</span>,<span style="color:#ae81ff">401</span>,<span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;jack&#39;</span>,<span style="color:#e6db74">&#39;female&#39;</span>,<span style="color:#ae81ff">18</span>,<span style="color:#e6db74">&#39;20110211&#39;</span>,<span style="color:#e6db74">&#39;teacher&#39;</span>,<span style="color:#ae81ff">9000</span>,<span style="color:#ae81ff">401</span>,<span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;jenny&#39;</span>,<span style="color:#e6db74">&#39;male&#39;</span>,<span style="color:#ae81ff">18</span>,<span style="color:#e6db74">&#39;19000301&#39;</span>,<span style="color:#e6db74">&#39;teacher&#39;</span>,<span style="color:#ae81ff">30000</span>,<span style="color:#ae81ff">401</span>,<span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;sank&#39;</span>,<span style="color:#e6db74">&#39;male&#39;</span>,<span style="color:#ae81ff">48</span>,<span style="color:#e6db74">&#39;20101111&#39;</span>,<span style="color:#e6db74">&#39;teacher&#39;</span>,<span style="color:#ae81ff">10000</span>,<span style="color:#ae81ff">401</span>,<span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;哈哈&#39;</span>,<span style="color:#e6db74">&#39;female&#39;</span>,<span style="color:#ae81ff">48</span>,<span style="color:#e6db74">&#39;20150311&#39;</span>,<span style="color:#e6db74">&#39;sale&#39;</span>,<span style="color:#ae81ff">3000</span>.<span style="color:#ae81ff">13</span>,<span style="color:#ae81ff">402</span>,<span style="color:#ae81ff">2</span>), <span style="color:#75715e">-- 以下是销售部门
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>(<span style="color:#e6db74">&#39;呵呵&#39;</span>,<span style="color:#e6db74">&#39;female&#39;</span>,<span style="color:#ae81ff">38</span>,<span style="color:#e6db74">&#39;20101101&#39;</span>,<span style="color:#e6db74">&#39;sale&#39;</span>,<span style="color:#ae81ff">2000</span>.<span style="color:#ae81ff">35</span>,<span style="color:#ae81ff">402</span>,<span style="color:#ae81ff">2</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;西西&#39;</span>,<span style="color:#e6db74">&#39;female&#39;</span>,<span style="color:#ae81ff">18</span>,<span style="color:#e6db74">&#39;20110312&#39;</span>,<span style="color:#e6db74">&#39;sale&#39;</span>,<span style="color:#ae81ff">1000</span>.<span style="color:#ae81ff">37</span>,<span style="color:#ae81ff">402</span>,<span style="color:#ae81ff">2</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;乐乐&#39;</span>,<span style="color:#e6db74">&#39;female&#39;</span>,<span style="color:#ae81ff">18</span>,<span style="color:#e6db74">&#39;20160513&#39;</span>,<span style="color:#e6db74">&#39;sale&#39;</span>,<span style="color:#ae81ff">3000</span>.<span style="color:#ae81ff">29</span>,<span style="color:#ae81ff">402</span>,<span style="color:#ae81ff">2</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;拉拉&#39;</span>,<span style="color:#e6db74">&#39;female&#39;</span>,<span style="color:#ae81ff">28</span>,<span style="color:#e6db74">&#39;20170127&#39;</span>,<span style="color:#e6db74">&#39;sale&#39;</span>,<span style="color:#ae81ff">4000</span>.<span style="color:#ae81ff">33</span>,<span style="color:#ae81ff">402</span>,<span style="color:#ae81ff">2</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;僧龙&#39;</span>,<span style="color:#e6db74">&#39;male&#39;</span>,<span style="color:#ae81ff">28</span>,<span style="color:#e6db74">&#39;20160311&#39;</span>,<span style="color:#e6db74">&#39;operation&#39;</span>,<span style="color:#ae81ff">10000</span>.<span style="color:#ae81ff">13</span>,<span style="color:#ae81ff">403</span>,<span style="color:#ae81ff">3</span>), <span style="color:#75715e">-- 以下是运营部门
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>(<span style="color:#e6db74">&#39;程咬金&#39;</span>,<span style="color:#e6db74">&#39;male&#39;</span>,<span style="color:#ae81ff">18</span>,<span style="color:#e6db74">&#39;19970312&#39;</span>,<span style="color:#e6db74">&#39;operation&#39;</span>,<span style="color:#ae81ff">20000</span>,<span style="color:#ae81ff">403</span>,<span style="color:#ae81ff">3</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;程咬银&#39;</span>,<span style="color:#e6db74">&#39;female&#39;</span>,<span style="color:#ae81ff">18</span>,<span style="color:#e6db74">&#39;20130311&#39;</span>,<span style="color:#e6db74">&#39;operation&#39;</span>,<span style="color:#ae81ff">19000</span>,<span style="color:#ae81ff">403</span>,<span style="color:#ae81ff">3</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;程咬铜&#39;</span>,<span style="color:#e6db74">&#39;male&#39;</span>,<span style="color:#ae81ff">18</span>,<span style="color:#e6db74">&#39;20150411&#39;</span>,<span style="color:#e6db74">&#39;operation&#39;</span>,<span style="color:#ae81ff">18000</span>,<span style="color:#ae81ff">403</span>,<span style="color:#ae81ff">3</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;程咬铁&#39;</span>,<span style="color:#e6db74">&#39;female&#39;</span>,<span style="color:#ae81ff">18</span>,<span style="color:#e6db74">&#39;20140512&#39;</span>,<span style="color:#e6db74">&#39;operation&#39;</span>,<span style="color:#ae81ff">17000</span>,<span style="color:#ae81ff">403</span>,<span style="color:#ae81ff">3</span>);
</span></span></code></pre></div><ul>
<li>查询关键字-where筛选</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#ae81ff">1</span>. <span style="color:#960050;background-color:#1e0010">查询</span>id大于等于3 <span style="color:#960050;background-color:#1e0010">小于等于</span><span style="color:#ae81ff">6</span><span style="color:#960050;background-color:#1e0010">的数据</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">分析： 只需要使用and链接两个条件即可
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">where</span> id<span style="color:#f92672">&gt;=</span><span style="color:#ae81ff">3</span> <span style="color:#66d9ef">and</span> id<span style="color:#f92672">&lt;=</span><span style="color:#ae81ff">6</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">where</span> id<span style="color:#f92672">&gt;=</span><span style="color:#ae81ff">3</span> <span style="color:#f92672">&amp;&amp;</span> id<span style="color:#f92672">&lt;=</span><span style="color:#ae81ff">6</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>. <span style="color:#960050;background-color:#1e0010">查询薪资是</span><span style="color:#ae81ff">20000</span><span style="color:#960050;background-color:#1e0010">或者</span><span style="color:#ae81ff">18000</span><span style="color:#960050;background-color:#1e0010">或者</span><span style="color:#ae81ff">17000</span><span style="color:#960050;background-color:#1e0010">的数据</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">分析： 可以使用or对多个条件进行匹配
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    可以使用in对一个数据集中的数据做匹配
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">where</span> salary<span style="color:#f92672">=</span><span style="color:#ae81ff">20000</span> <span style="color:#66d9ef">or</span> salary<span style="color:#f92672">=</span><span style="color:#ae81ff">18000</span> <span style="color:#66d9ef">or</span> salary<span style="color:#f92672">=</span><span style="color:#ae81ff">17000</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">where</span> salary <span style="color:#66d9ef">in</span> (<span style="color:#ae81ff">20000</span>,<span style="color:#ae81ff">18000</span>,<span style="color:#ae81ff">17000</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>. <span style="color:#960050;background-color:#1e0010">查询员工姓名中包含字母</span>o的员工姓名与薪资
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">分析： 需要使用like模糊查询
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> name,salary <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">where</span> name <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;%o%&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>. <span style="color:#960050;background-color:#1e0010">查询员工姓名是由四个字符组成的员工姓名与其薪资</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">分析： 使用模糊查询单匹配字符_
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> name,salary <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">where</span> name <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;____&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> name.salary <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">where</span> <span style="color:#66d9ef">char_length</span>(name) <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>. <span style="color:#960050;background-color:#1e0010">查询岗位描述为空的员工名与岗位名</span>  <span style="color:#960050;background-color:#1e0010">针对</span>null不能用等号<span style="color:#960050;background-color:#1e0010">，只能用</span><span style="color:#66d9ef">is</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">分析： 针对null 不能使用=号，只能使用is
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">where</span> post_comment <span style="color:#66d9ef">is</span> <span style="color:#66d9ef">null</span>;
</span></span></code></pre></div><ul>
<li>查询关键字group by分组</li>
</ul>
<blockquote>
<p>group by 分组就是将前面处理的数据作为新的数据集处，可以配合聚合函数
分组之后最小单位为组，不再是组内单个的数据</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQl" data-lang="SQl"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">where</span> post;
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 注意由于mysql中的严格模式要求，需要将分组后字段和select字段只能填写分组依据，这里的select * 不可用，这是由only_full_group_by配置来决定
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> post <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> post;
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 以post字段将数据分为4组
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">+</span><span style="color:#75715e">-----------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> post                        <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">-----------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> <span style="color:#66d9ef">operation</span>                   <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> sale                        <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> teacher                     <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">浦东第一帅形象代言</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">-----------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#ae81ff">4</span> <span style="color:#66d9ef">rows</span> <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">02</span> sec)
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 需求：将员工数据按照部门分组，并获得每个部门最高工资
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- 在分组之后由select处理，可以用函数处理其他字段信息
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> post,<span style="color:#66d9ef">max</span>(salary) <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> post;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 对打印的结果字段做别名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> post, <span style="color:#66d9ef">max</span>(salary) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;最高薪&#39;</span> <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> post;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 一次获取部门薪资相关统计
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> post <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;部门&#39;</span>,<span style="color:#66d9ef">max</span>(salary) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;最高薪资&#39;</span>, <span style="color:#66d9ef">min</span>(salary) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;最低薪资&#39;</span>, <span style="color:#66d9ef">avg</span>(salary) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;平均薪资&#39;</span>, <span style="color:#66d9ef">sum</span>(salary) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;薪水支出总额&#39;</span> <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> post;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 统计每个部门的人数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> post <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;部门&#39;</span>, <span style="color:#66d9ef">count</span>(id) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;人数&#39;</span> <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> post;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 统计每个部门的部门名称以及部门下的员工姓名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> post,group_concat(name) <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> post;  
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> post, group_concat(name,<span style="color:#e6db74">&#39;_优秀员工&#39;</span>) <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> post;
</span></span></code></pre></div><ul>
<li>查询关键字-having过滤</li>
</ul>
<blockquote>
<p>having本质的区别和where是一样的，作为数据的筛选
区别： where是首次筛选，having是二次筛选，即对数据结果集再次处理</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#75715e">-- 统计各部门年龄在30岁以上的员工平均工资 并且保留大于10000的数据
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">1. 先筛选出年纪30岁之上的员工数据
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">select * from emp where age &gt; 30;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">2. 再对筛选出来的数据按照部门分组并统计拼接薪资
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">select post,avg(salary) from emp where age &gt; 30 group by post;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">3. 针对分组统计后的数据做二次筛选
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">select post,avg(salary) from emp where age &gt; 30 group by post having avg(salary) &gt; 10000;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> post,<span style="color:#66d9ef">avg</span>(salary) <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">where</span> age <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">30</span> <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> post <span style="color:#66d9ef">having</span> <span style="color:#66d9ef">avg</span>(salary) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">10000</span>;
</span></span></code></pre></div><ul>
<li>查询关键字-distinct去重</li>
</ul>
<blockquote>
<p>注意，数据必须完全一致才能去重，多条数据也需要遵循</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">distinct</span> id,age <span style="color:#66d9ef">from</span> emp; 
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 这里id和age字段中必须完全一致才能被去重
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">例如,符合要求
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">id 1  age 18
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">id 1  age 18
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">不符合要求
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">id 1  age 18
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">id 2  age 18
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span></code></pre></div><ul>
<li>查询关键字 - order by 排序</li>
</ul>
<blockquote>
<p>asc ：升序， desc ：降序</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#75715e">-- 单字段排序
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- 升序
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> age <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> acs;
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 降序
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> age <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> <span style="color:#66d9ef">desc</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 多字段排序
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">分析： 先对age进行升序，再更具salary降序，
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> age,salary <span style="color:#66d9ef">desc</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">统计各部门年龄在10岁以上的员工平均工资，
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">并且保留平均工资大于1000的部门，
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">然后对平均工资进行排序
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> post,<span style="color:#66d9ef">avg</span>(salary) <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">where</span> age <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">10</span> <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> post <span style="color:#66d9ef">having</span> <span style="color:#66d9ef">avg</span>(salary) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1000</span> <span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> <span style="color:#66d9ef">avg</span>(salary) <span style="color:#66d9ef">desc</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">使用as 别名降低语句执消耗资源
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">select post,avg(salary) as avg_s from emp where age &gt; 10 group by post having avg_s &gt; 1000 order by avg_s desc;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span></code></pre></div><ul>
<li>查询关键字- limit分页</li>
</ul>
<blockquote>
<p>对数据做截取处理，例如1000万数据，进行处理后可以使用limit 100 看前100条数据，也可以写100,100 看第100条数据开始的后100条</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#75715e">-- 前5条数据
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">limit</span> <span style="color:#ae81ff">5</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 第二条数据开始的后5条数据
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">limit</span> <span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">5</span>;
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">查询工资最高的人的详细信息</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> salary <span style="color:#66d9ef">desc</span> <span style="color:#66d9ef">limit</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+------+--------+-----+------------+---------+--------------+------------+--------+-----------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> id <span style="color:#f92672">|</span> name <span style="color:#f92672">|</span> gender <span style="color:#f92672">|</span> age <span style="color:#f92672">|</span> hire_date  <span style="color:#f92672">|</span> post    <span style="color:#f92672">|</span> post_comment <span style="color:#f92672">|</span> salary     <span style="color:#f92672">|</span> office <span style="color:#f92672">|</span> depart_id <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+------+--------+-----+------------+---------+--------------+------------+--------+-----------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> tom  <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>  <span style="color:#ae81ff">78</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">2015</span><span style="color:#f92672">-</span><span style="color:#ae81ff">03</span><span style="color:#f92672">-</span><span style="color:#ae81ff">02</span> <span style="color:#f92672">|</span> teacher <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>         <span style="color:#f92672">|</span> <span style="color:#ae81ff">1000000</span>.<span style="color:#ae81ff">31</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">401</span> <span style="color:#f92672">|</span>         <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+------+--------+-----+------------+---------+--------------+------------+--------+-----------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#ae81ff">1</span> <span style="color:#66d9ef">row</span> <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">02</span> sec)
</span></span></code></pre></div><ul>
<li>查询关键字-regexp 正则表达式</li>
</ul>
<blockquote>
<p>模糊查询的第二种方式</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">where</span> name regexp <span style="color:#e6db74">&#39;^j.*(n|y)$&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">如果出现1139错误请将正则中的？+ 去除或替换
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">1139 - Got error &#39;repetition-operator operand invalid&#39; from regexp
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">POSIX regexes don&#39;t support using the question mark ? as a non-greedy (lazy) modifier to the star and plus quantifiers like PCRE (Perl Compatible Regular Expressions). This means you can&#39;t use +? and *?
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span></code></pre></div><ul>
<li>多表查询思路</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> dep(
</span></span><span style="display:flex;"><span>    id int <span style="color:#66d9ef">primary</span> <span style="color:#66d9ef">key</span> auto_increment,
</span></span><span style="display:flex;"><span>    name varchar(<span style="color:#ae81ff">20</span>)
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> emp1(
</span></span><span style="display:flex;"><span>    id int <span style="color:#66d9ef">primary</span> <span style="color:#66d9ef">key</span> auto_increment,
</span></span><span style="display:flex;"><span>    name varchar(<span style="color:#ae81ff">20</span>),
</span></span><span style="display:flex;"><span>    sex enum(<span style="color:#e6db74">&#39;male&#39;</span>,<span style="color:#e6db74">&#39;female&#39;</span>) <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span> <span style="color:#66d9ef">default</span> <span style="color:#e6db74">&#39;male&#39;</span>,
</span></span><span style="display:flex;"><span>    age int,
</span></span><span style="display:flex;"><span>    dep_id int
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> dep <span style="color:#66d9ef">values</span>
</span></span><span style="display:flex;"><span>(<span style="color:#ae81ff">200</span>,<span style="color:#e6db74">&#39;技术&#39;</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#ae81ff">201</span>,<span style="color:#e6db74">&#39;人力资源&#39;</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#ae81ff">202</span>,<span style="color:#e6db74">&#39;销售&#39;</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#ae81ff">203</span>,<span style="color:#e6db74">&#39;运营&#39;</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#ae81ff">205</span>,<span style="color:#e6db74">&#39;财务&#39;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> emp1(name,sex,age,dep_id) <span style="color:#66d9ef">values</span>
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;jason&#39;</span>,<span style="color:#e6db74">&#39;male&#39;</span>,<span style="color:#ae81ff">18</span>,<span style="color:#ae81ff">200</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;dragon&#39;</span>,<span style="color:#e6db74">&#39;female&#39;</span>,<span style="color:#ae81ff">48</span>,<span style="color:#ae81ff">201</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;kevin&#39;</span>,<span style="color:#e6db74">&#39;male&#39;</span>,<span style="color:#ae81ff">18</span>,<span style="color:#ae81ff">201</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;nick&#39;</span>,<span style="color:#e6db74">&#39;male&#39;</span>,<span style="color:#ae81ff">28</span>,<span style="color:#ae81ff">202</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;owen&#39;</span>,<span style="color:#e6db74">&#39;male&#39;</span>,<span style="color:#ae81ff">18</span>,<span style="color:#ae81ff">203</span>),
</span></span><span style="display:flex;"><span>(<span style="color:#e6db74">&#39;jerry&#39;</span>,<span style="color:#e6db74">&#39;female&#39;</span>,<span style="color:#ae81ff">18</span>,<span style="color:#ae81ff">204</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> emp1, dep;
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">在同时对两张表查询数据值称为：’笛卡尔积‘无脑对应没有意义，多表联查应该将
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">无关系的两张表通过语句指定逻辑关系
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> emp1, dep <span style="color:#66d9ef">where</span> emp1.dep_id<span style="color:#f92672">=</span>dep.id;
</span></span><span style="display:flex;"><span>mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> emp1, dep <span style="color:#66d9ef">where</span> emp1.dep_id<span style="color:#f92672">=</span>dep.id;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+--------+--------+-----+--------+-----+--------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> id <span style="color:#f92672">|</span> name   <span style="color:#f92672">|</span> sex    <span style="color:#f92672">|</span> age <span style="color:#f92672">|</span> dep_id <span style="color:#f92672">|</span> id  <span style="color:#f92672">|</span> name         <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+--------+--------+-----+--------+-----+--------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> jason  <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>  <span style="color:#ae81ff">18</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">200</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">200</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">技术</span>          <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> dragon <span style="color:#f92672">|</span> female <span style="color:#f92672">|</span>  <span style="color:#ae81ff">48</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">201</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">201</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">人力资源</span>       <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> kevin  <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>  <span style="color:#ae81ff">18</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">201</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">201</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">人力资源</span>       <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">4</span> <span style="color:#f92672">|</span> nick   <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>  <span style="color:#ae81ff">28</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">202</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">202</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">销售</span>          <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">5</span> <span style="color:#f92672">|</span> owen   <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>  <span style="color:#ae81ff">18</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">203</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">203</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">运营</span>          <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+--------+--------+-----+--------+-----+--------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#ae81ff">5</span> <span style="color:#66d9ef">rows</span> <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">02</span> sec)
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 基于上述的操作就可以将多张表合并到一起然后一次性获取更多的数据
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 基于emp表格对数据做出筛选
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>. <span style="color:#960050;background-color:#1e0010">查询岗位名以及岗位包含的所有员工名字</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> post,group_concat(name) <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> post;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>. <span style="color:#960050;background-color:#1e0010">查询岗位名以及各岗位内包含的员工个数</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> post <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;部门&#39;</span>,group_concat(name) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;部门成员&#39;</span>,<span style="color:#66d9ef">count</span>(name) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;部门人数&#39;</span> <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> post;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>. <span style="color:#960050;background-color:#1e0010">查询公司内男员工和女员工的个数</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> gender <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;性别&#39;</span>,<span style="color:#66d9ef">count</span>(id) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;人数&#39;</span> <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> gender;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>. <span style="color:#960050;background-color:#1e0010">查询岗位名以及各岗位的平均薪资</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> post,<span style="color:#66d9ef">avg</span>(salary) <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> post;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>. <span style="color:#960050;background-color:#1e0010">查询岗位名以及各岗位的最高薪资</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> post,<span style="color:#66d9ef">max</span>(salary) <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> post;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>. <span style="color:#960050;background-color:#1e0010">查询岗位名以及各岗位的最低薪资</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> post,<span style="color:#66d9ef">min</span>(salary) <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> post;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>. <span style="color:#960050;background-color:#1e0010">查询男员工与男员工的平均薪资，女员工与女员工的平均薪资</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> gender <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;性别&#39;</span>,<span style="color:#66d9ef">avg</span>(salary) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;平均薪资&#39;</span> <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> gender;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>. <span style="color:#960050;background-color:#1e0010">统计各部门年龄在</span><span style="color:#ae81ff">30</span><span style="color:#960050;background-color:#1e0010">岁以上的员工平均工资</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> post <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;部门&#39;</span>,<span style="color:#66d9ef">avg</span>(salary) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;平均薪资&#39;</span> <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">where</span> age <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">30</span> <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> post;
</span></span></code></pre></div>
  
  </div>
</article>


    <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2022  self-salvation 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts/">All posts</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/python">Python</a></li>
         
        <li><a href="/databases">databases</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
</html>
