<!DOCTYPE html>
<html lang="en-us">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <script type="text/javascript" src="https://latest.cactus.chat/cactus.js"></script>
  <link rel="stylesheet" href="https://latest.cactus.chat/style.css" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> 数据库多表联查 | self-salvation</title>
  <link rel = 'canonical' href = 'https://jinkes-li.github.io/databases/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%9A%E8%A1%A8%E8%81%94%E6%9F%A5/'>
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="数据库多表联查" />
<meta property="og:description" content="MySQL 多表联查及PySQL模块使用 多表查询的两种方式 /*原始数据 mysql&gt; select * from emp1; &#43;----&#43;--------&#43;--------&#43;-----&#43;--------&#43; | id | name | sex | age | dep_id | &#43;----&#43;--------&#43;--------&#43;-----&#43;--------&#43; | 1 | jason | male | 18 | 200 | | 2 | dragon | female | 48 | 201 | | 3 | kevin | male | 18 | 201 | | 4 | nick | male | 28 | 202 | | 5 | owen | male | 18 | 203 | | 6 | jerry | female | 18 | 204 | &#43;----&#43;--------&#43;--------&#43;-----&#43;--------&#43; 6 rows in set (0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jinkes-li.github.io/databases/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%9A%E8%A1%A8%E8%81%94%E6%9F%A5/" /><meta property="article:section" content="databases" />
<meta property="article:published_time" content="2022-11-28T21:59:28+08:00" />
<meta property="article:modified_time" content="2022-11-28T21:59:28+08:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="数据库多表联查"/>
<meta name="twitter:description" content="MySQL 多表联查及PySQL模块使用 多表查询的两种方式 /*原始数据 mysql&gt; select * from emp1; &#43;----&#43;--------&#43;--------&#43;-----&#43;--------&#43; | id | name | sex | age | dep_id | &#43;----&#43;--------&#43;--------&#43;-----&#43;--------&#43; | 1 | jason | male | 18 | 200 | | 2 | dragon | female | 48 | 201 | | 3 | kevin | male | 18 | 201 | | 4 | nick | male | 28 | 202 | | 5 | owen | male | 18 | 203 | | 6 | jerry | female | 18 | 204 | &#43;----&#43;--------&#43;--------&#43;-----&#43;--------&#43; 6 rows in set (0."/>

  
  
    
  
  
  <link rel="stylesheet" href="https://jinkes-li.github.io/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css" integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://jinkes-li.github.io/images/favicon.ico" />

  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

    <header id="header">
  <a href="https://jinkes-li.github.io/">
  
    <div id="logo" style="background-image: url(https://jinkes-li.github.io/images/logo.png)"></div>
  
  <div id="title">
    <h1>self-salvation</h1>
  </div>
  </a>
  <div id="nav">
    <ul>
      <li class="icon">
        <a href="#" aria-label="Menu"><i class="fas fa-bars fa-2x" aria-hidden="true"></i></a>
      </li>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/posts/">All posts</a></li>
      
        <li><a href="/tags">Tags</a></li>
      
        <li><a href="/python">Python</a></li>
      
        <li><a href="/databases">databases</a></li>
      
        <li><a href="/about">About</a></li>
      
    </ul>
  </div>
</header>



    
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <div class="content" itemprop="articleBody">
  
    <h3 id="mysql-多表联查及pysql模块使用">MySQL 多表联查及PySQL模块使用</h3>
<ul>
<li>多表查询的两种方式</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#75715e">/*原始数据
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">mysql&gt; select * from emp1;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">+----+--------+--------+-----+--------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">| id | name   | sex    | age | dep_id |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">+----+--------+--------+-----+--------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">|  1 | jason  | male   |  18 |    200 |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">|  2 | dragon | female |  48 |    201 |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">|  3 | kevin  | male   |  18 |    201 |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">|  4 | nick   | male   |  28 |    202 |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">|  5 | owen   | male   |  18 |    203 |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">|  6 | jerry  | female |  18 |    204 |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">+----+--------+--------+-----+--------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">6 rows in set (0.02 sec)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">mysql&gt; select * from dep;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">+-----+--------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">| id  | name         |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">+-----+--------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">| 200 | 技术       		|
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">| 201 | 人力资源 		 	 |
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">| 202 | 销售       		|
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">| 203 | 运营       		|
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">| 205 | 财务       		|
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">+-----+--------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">5 rows in set (0.02 sec)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 方式1：连表操作
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- inner join 内连接
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> emp1 <span style="color:#66d9ef">inner</span> <span style="color:#66d9ef">join</span> dep <span style="color:#66d9ef">on</span> emp1.dep_id<span style="color:#f92672">=</span>dep.id;
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+--------+--------+-----+--------+-----+--------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> id <span style="color:#f92672">|</span> name   <span style="color:#f92672">|</span> sex    <span style="color:#f92672">|</span> age <span style="color:#f92672">|</span> dep_id <span style="color:#f92672">|</span> id  <span style="color:#f92672">|</span> name         <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+--------+--------+-----+--------+-----+--------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> jason  <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>  <span style="color:#ae81ff">18</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">200</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">200</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">技术</span>       <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> dragon <span style="color:#f92672">|</span> female <span style="color:#f92672">|</span>  <span style="color:#ae81ff">48</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">201</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">201</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">人力资源</span> 		<span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> kevin  <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>  <span style="color:#ae81ff">18</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">201</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">201</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">人力资源</span> 		<span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">4</span> <span style="color:#f92672">|</span> nick   <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>  <span style="color:#ae81ff">28</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">202</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">202</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">销售</span>       <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">5</span> <span style="color:#f92672">|</span> owen   <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>  <span style="color:#ae81ff">18</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">203</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">203</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">运营</span>       <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+--------+--------+-----+--------+-----+--------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#ae81ff">5</span> <span style="color:#66d9ef">rows</span> <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">23</span> sec)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">通过上面使用的内连接的方式 inner join的方式对两个数据表进行查询，的到的是字段与字段条件成立的数据，也就是数据的交集部分
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">*/</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">left</span> <span style="color:#66d9ef">join</span> <span style="color:#960050;background-color:#1e0010">左连接</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&gt;</span> <span style="color:#960050;background-color:#1e0010">左连接会以左边的表为基准，如果右侧不存在数据则使用</span>NULL填充
</span></span><span style="display:flex;"><span>	mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> emp1 <span style="color:#66d9ef">left</span> <span style="color:#66d9ef">join</span> dep <span style="color:#66d9ef">on</span> emp1.dep_id <span style="color:#f92672">=</span> dep.id;
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+--------+--------+-----+--------+------+--------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> id <span style="color:#f92672">|</span> name   <span style="color:#f92672">|</span> sex    <span style="color:#f92672">|</span> age <span style="color:#f92672">|</span> dep_id <span style="color:#f92672">|</span> id   <span style="color:#f92672">|</span> name         <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+--------+--------+-----+--------+------+--------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> jason  <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>  <span style="color:#ae81ff">18</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">200</span> <span style="color:#f92672">|</span>  <span style="color:#ae81ff">200</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">技术</span>       <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> dragon <span style="color:#f92672">|</span> female <span style="color:#f92672">|</span>  <span style="color:#ae81ff">48</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">201</span> <span style="color:#f92672">|</span>  <span style="color:#ae81ff">201</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">人力资源</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> kevin  <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>  <span style="color:#ae81ff">18</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">201</span> <span style="color:#f92672">|</span>  <span style="color:#ae81ff">201</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">人力资源</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">4</span> <span style="color:#f92672">|</span> nick   <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>  <span style="color:#ae81ff">28</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">202</span> <span style="color:#f92672">|</span>  <span style="color:#ae81ff">202</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">销售</span>       <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">5</span> <span style="color:#f92672">|</span> owen   <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>  <span style="color:#ae81ff">18</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">203</span> <span style="color:#f92672">|</span>  <span style="color:#ae81ff">203</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">运营</span>       <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">6</span> <span style="color:#f92672">|</span> jerry  <span style="color:#f92672">|</span> female <span style="color:#f92672">|</span>  <span style="color:#ae81ff">18</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">204</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>         <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+--------+--------+-----+--------+------+--------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#ae81ff">6</span> <span style="color:#66d9ef">rows</span> <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">01</span> sec)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">right</span> <span style="color:#66d9ef">join</span> <span style="color:#960050;background-color:#1e0010">右连接</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&gt;</span> <span style="color:#960050;background-color:#1e0010">右连接会以右边的表为基准，如果右侧不存在数据则使用</span>NULL填充
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> emp1 <span style="color:#66d9ef">right</span> <span style="color:#66d9ef">join</span> dep <span style="color:#66d9ef">on</span> emp1.dep_id<span style="color:#f92672">=</span>dep.id;
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">------+--------+--------+------+--------+-----+--------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> id   <span style="color:#f92672">|</span> name   <span style="color:#f92672">|</span> sex    <span style="color:#f92672">|</span> age  <span style="color:#f92672">|</span> dep_id <span style="color:#f92672">|</span> id  <span style="color:#f92672">|</span> name         <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">------+--------+--------+------+--------+-----+--------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span>    <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> jason  <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>   <span style="color:#ae81ff">18</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">200</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">200</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">技术</span>       <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> dragon <span style="color:#f92672">|</span> female <span style="color:#f92672">|</span>   <span style="color:#ae81ff">48</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">201</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">201</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">人力资源</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> kevin  <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>   <span style="color:#ae81ff">18</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">201</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">201</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">人力资源</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>    <span style="color:#ae81ff">4</span> <span style="color:#f92672">|</span> nick   <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>   <span style="color:#ae81ff">28</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">202</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">202</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">销售</span>       <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>    <span style="color:#ae81ff">5</span> <span style="color:#f92672">|</span> owen   <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>   <span style="color:#ae81ff">18</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">203</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">203</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">运营</span>       <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>   <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>   <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>   <span style="color:#f92672">|</span> <span style="color:#ae81ff">205</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">财务</span>       <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">------+--------+--------+------+--------+-----+--------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#ae81ff">6</span> <span style="color:#66d9ef">rows</span> <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">set</span> (<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">02</span> sec)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">union</span> <span style="color:#960050;background-color:#1e0010">全链接</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">-- 全连接就是使用左连接和右连接查询之后将数据和到一起，查出所有数据，没有的数据使用null填充
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>mysql<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> emp1 <span style="color:#66d9ef">left</span> <span style="color:#66d9ef">join</span> dep <span style="color:#66d9ef">on</span> emp1.dep_id <span style="color:#f92672">=</span> dep.id
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">UNION</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> emp1 <span style="color:#66d9ef">right</span> <span style="color:#66d9ef">join</span> dep <span style="color:#66d9ef">on</span> emp1.dep_id<span style="color:#f92672">=</span>dep.id
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">------+--------+--------+------+--------+------+--------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> id   <span style="color:#f92672">|</span> name   <span style="color:#f92672">|</span> sex    <span style="color:#f92672">|</span> age  <span style="color:#f92672">|</span> dep_id <span style="color:#f92672">|</span> id   <span style="color:#f92672">|</span> name         <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">------+--------+--------+------+--------+------+--------------+
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span>    <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> jason  <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>   <span style="color:#ae81ff">18</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">200</span> <span style="color:#f92672">|</span>  <span style="color:#ae81ff">200</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">技术</span>       <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>    <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> dragon <span style="color:#f92672">|</span> female <span style="color:#f92672">|</span>   <span style="color:#ae81ff">48</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">201</span> <span style="color:#f92672">|</span>  <span style="color:#ae81ff">201</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">人力资源</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>    <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> kevin  <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>   <span style="color:#ae81ff">18</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">201</span> <span style="color:#f92672">|</span>  <span style="color:#ae81ff">201</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">人力资源</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>    <span style="color:#ae81ff">4</span> <span style="color:#f92672">|</span> nick   <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>   <span style="color:#ae81ff">28</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">202</span> <span style="color:#f92672">|</span>  <span style="color:#ae81ff">202</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">销售</span>       <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>    <span style="color:#ae81ff">5</span> <span style="color:#f92672">|</span> owen   <span style="color:#f92672">|</span> male   <span style="color:#f92672">|</span>   <span style="color:#ae81ff">18</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">203</span> <span style="color:#f92672">|</span>  <span style="color:#ae81ff">203</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">运营</span>       <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>    <span style="color:#ae81ff">6</span> <span style="color:#f92672">|</span> jerry  <span style="color:#f92672">|</span> female <span style="color:#f92672">|</span>   <span style="color:#ae81ff">18</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">204</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>         <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>   <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>   <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">NULL</span>   <span style="color:#f92672">|</span>  <span style="color:#ae81ff">205</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">财务</span>       <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">------+--------+--------+------+--------+------+--------------+
</span></span></span></code></pre></div><ul>
<li>
<p>多表联查思想</p>
<ol>
<li>通过连表操作可以将查询出来的结果表当做一张表，起别名后向后查询，如果存在多张关系表，依次查询即可</li>
</ol>
</li>
<li>
<p>多表联查的第二种方式</p>
</li>
<li>
<p>子查询
将一条SQL语句使用括号括起来当做另一条SQL语句的查询条件
举例题目：求姓名是jason的员工的部门名称</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span>	<span style="color:#75715e">-- 通过用户表获取用户的部门id
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">select</span> dep_id <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">where</span> name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;jason&#39;</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">-- 通过查询出来的部门id获取部门名称
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">select</span> name <span style="color:#66d9ef">from</span> dep <span style="color:#66d9ef">where</span> id<span style="color:#f92672">=</span><span style="color:#ae81ff">200</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">-- 最后将sql合并，通过子查询的方式获取用户的部门名称
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">select</span> name <span style="color:#66d9ef">from</span> dep <span style="color:#66d9ef">where</span> id<span style="color:#f92672">=</span>(<span style="color:#66d9ef">select</span> dep_id <span style="color:#66d9ef">from</span> emp <span style="color:#66d9ef">where</span> name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;jason&#39;</span>);
</span></span></code></pre></div><ul>
<li>MySQL中小知识点的补充说明</li>
</ul>
<ol>
<li>concat与concat_ws
concat 用于分组之前的字段拼接操作</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span>		<span style="color:#66d9ef">select</span> concat(name,<span style="color:#e6db74">&#39;|&#39;</span>,sex) <span style="color:#66d9ef">from</span> emp;
</span></span></code></pre></div><pre><code>concat_ws拼接多个字段并且之间的连接符一致
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span>		<span style="color:#66d9ef">select</span> concat_ws(<span style="color:#e6db74">&#39;|&#39;</span>, name,sex,age,dep_id) <span style="color:#66d9ef">from</span> emp;
</span></span></code></pre></div><ol start="2">
<li>
<p>exists 用于判断是否存在
sql1 exists sql2
sql2 有结果的情况下才会执行sql1 否则不执行sql1 返回空数据</p>
</li>
<li>
<p>表相关操作</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span>	<span style="color:#75715e">-- 修改表名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">-- alter table 表名 rename 新表名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> t2 <span style="color:#66d9ef">rename</span> t1;
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">-- 添加新字段
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">-- alter table 表名 add 字段名 字段类型 约束条件
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> t1 <span style="color:#66d9ef">add</span> age int <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">-- 添加指定字段下面的新字段
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">-- alter table 表名 add 字段名 字段类型 约束条件 after 现有字段
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> t1 <span style="color:#66d9ef">add</span> namekey varchar(<span style="color:#ae81ff">20</span>) <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span> <span style="color:#66d9ef">after</span> name;
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">-- 添加新字段至首行
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">-- alter table 表名 add 字段名 字段类型 约束条件 firse
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> t1 <span style="color:#66d9ef">add</span> vl varchar(<span style="color:#ae81ff">20</span>) <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span> <span style="color:#66d9ef">first</span>;
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">-- 修改字段名和属性
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">-- alter table 表名 change 旧字段 新字段 字段类型 约束条件
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> t1 change <span style="color:#66d9ef">old</span> <span style="color:#66d9ef">new</span> int <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">-- 修改字段名的类型约束等
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">-- alter table 表名 modify 字段名 字段类型 约束条件
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> t1 <span style="color:#66d9ef">modify</span> <span style="color:#66d9ef">new</span> varchar(<span style="color:#ae81ff">20</span>) <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">-- 删除字段
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">-- alter table 表名 drop 表名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">alter</span> <span style="color:#66d9ef">table</span> t1 <span style="color:#66d9ef">drop</span> <span style="color:#66d9ef">new</span>;
</span></span></code></pre></div><ul>
<li>Python操作MySQL</li>
</ul>
<blockquote>
<p>python操作mysql使用了pymysql模块，接下来介绍pymysql简单的用法
需要现在python环境中安装pymysql pip3 install pymysql</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># 导入pymysql模块</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1.</span> 链接服务端必备条件
</span></span><span style="display:flex;"><span>conn <span style="color:#f92672">=</span> pymysql<span style="color:#f92672">.</span>connect(
</span></span><span style="display:flex;"><span>	host<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;127.0.0.1&#39;</span>,
</span></span><span style="display:flex;"><span>	port<span style="color:#f92672">=</span><span style="color:#ae81ff">3306</span>,
</span></span><span style="display:flex;"><span>	user<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;root&#39;</span>,
</span></span><span style="display:flex;"><span>	password<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;123&#39;</span>,
</span></span><span style="display:flex;"><span>	db<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;db&#39;</span>,
</span></span><span style="display:flex;"><span>	charset<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;utf8mb4&#39;</span>,
</span></span><span style="display:flex;"><span>	autocommit<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">1.pymysql.connect产生一个链接对象conn
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">2.host 链接地址
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">3.port 端口号
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">4.user 用户名
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">5.password 密码
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">6.db 需要链接的数据库
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">7.charset 链接的字符集
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">8.autocommit 自动确认提交，由于更删改需要二次确认，如果没有此配置，需要代码中使用对象conn.commit()提交 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2.</span> 产生游标对象
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 括号内如果不写其他参数，数据获取时以元组返回，辨识度不高</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># cursor = conn.cursor() </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 括号内填写cursor=pymysql.cursors.DictCursor,f返回的是列表套字典</span>
</span></span><span style="display:flex;"><span>cursor <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span>cursor(cursor<span style="color:#f92672">=</span>pymysql<span style="color:#f92672">.</span>cursors<span style="color:#f92672">.</span>DictCursor)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3.</span> 编写SQL语句
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 编写SQL语句</span>
</span></span><span style="display:flex;"><span>sql <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;select * from emp;&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4.</span> 发送SQL语句
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 发送SQL语句</span>
</span></span><span style="display:flex;"><span>cursor<span style="color:#f92672">.</span>execute(sql)  <span style="color:#75715e"># execute也有返回值，可以使用变量接收，值为sql语句影响的行数</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5.</span> 获取SQL语句执行之后的结果
</span></span><span style="display:flex;"><span>res <span style="color:#f92672">=</span> cursor<span style="color:#f92672">.</span>fetchall()  <span style="color:#75715e"># 获取返回的所有结果</span>
</span></span><span style="display:flex;"><span>print(res)
</span></span></code></pre></div><ul>
<li>pymysql补充说明</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#ae81ff">1.</span> 获取数据
</span></span><span style="display:flex;"><span>fetchall() <span style="color:#75715e"># 获取数据集的全部</span>
</span></span><span style="display:flex;"><span>fetchone() <span style="color:#75715e"># 获取数据集的第一条</span>
</span></span><span style="display:flex;"><span>fetchmany() <span style="color:#75715e"># 获取指定数量的结果集, 参数可填数字，获取的记录条数</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;需要注意这三者类似于文件光标移动的特新，如果不做额外的操作，好哦吗重复获取，将无法获取到数据
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2.</span> 游标移动
</span></span><span style="display:flex;"><span>cursor<span style="color:#f92672">.</span>scroll(<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;relative&#39;</span>)  <span style="color:#75715e"># 基于当前位置往后移动参数1为行数</span>
</span></span><span style="display:flex;"><span>cursor<span style="color:#f92672">.</span>scroll(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;absolute&#39;</span>)  <span style="color:#75715e"># 基于数据的开头往后移动</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3.</span> 更删改提交二次确认
</span></span><span style="display:flex;"><span>autocommit<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span> <span style="color:#75715e"># 针对增 删 改 自动确认(直接配置)</span>
</span></span><span style="display:flex;"><span>conn<span style="color:#f92672">.</span>commit()  <span style="color:#75715e"># 针对 增 删 改 需要二次确认(代码确认)</span>
</span></span></code></pre></div><ul>
<li>接收数据集时注意事项</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pymysql
</span></span><span style="display:flex;"><span>conn <span style="color:#f92672">=</span> pysmysql<span style="color:#f92672">.</span>connect(
</span></span><span style="display:flex;"><span>	host<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;127.0.0.1&#39;</span>,
</span></span><span style="display:flex;"><span>	port<span style="color:#f92672">=</span><span style="color:#ae81ff">3306</span>,
</span></span><span style="display:flex;"><span>	user<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;root&#39;</span>,
</span></span><span style="display:flex;"><span>	password<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;123&#39;</span>
</span></span><span style="display:flex;"><span>	db<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;db&#39;</span>,
</span></span><span style="display:flex;"><span>	charset<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;utf8mb4&#39;</span>,
</span></span><span style="display:flex;"><span>	autocommit<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>cursor <span style="color:#f92672">=</span> conn<span style="color:#f92672">.</span>cursors(cursor<span style="color:#f92672">=</span>pymysql<span style="color:#f92672">.</span>cursors<span style="color:#f92672">.</span>DictCursor)
</span></span><span style="display:flex;"><span>sql <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;select * from t1;&#39;</span>
</span></span><span style="display:flex;"><span>cursor<span style="color:#f92672">.</span>execute(sql)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># </span>
</span></span><span style="display:flex;"><span>res <span style="color:#f92672">=</span> cursor<span style="color:#f92672">.</span>fetchall()
</span></span><span style="display:flex;"><span>res1 <span style="color:#f92672">=</span> cursor<span style="color:#f92672">.</span>fetchone()
</span></span><span style="display:flex;"><span>res2 <span style="color:#f92672">=</span> cursor<span style="color:#f92672">.</span>fetchone()
</span></span><span style="display:flex;"><span>print(res)
</span></span><span style="display:flex;"><span>print(res1)
</span></span><span style="display:flex;"><span>print(res2)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 打印结果</span>
</span></span><span style="display:flex;"><span>[{<span style="color:#e6db74">&#39;id&#39;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;name&#39;</span>: <span style="color:#e6db74">&#39;jason&#39;</span>, <span style="color:#e6db74">&#39;sex&#39;</span>: <span style="color:#e6db74">&#39;male&#39;</span>, <span style="color:#e6db74">&#39;age&#39;</span>: <span style="color:#ae81ff">18</span>, <span style="color:#e6db74">&#39;dep_id&#39;</span>: <span style="color:#ae81ff">200</span>}, {<span style="color:#e6db74">&#39;id&#39;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#39;name&#39;</span>: <span style="color:#e6db74">&#39;dragon&#39;</span>, <span style="color:#e6db74">&#39;sex&#39;</span>: <span style="color:#e6db74">&#39;female&#39;</span>, <span style="color:#e6db74">&#39;age&#39;</span>: <span style="color:#ae81ff">48</span>, <span style="color:#e6db74">&#39;dep_id&#39;</span>: <span style="color:#ae81ff">201</span>}, {<span style="color:#e6db74">&#39;id&#39;</span>: <span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#39;name&#39;</span>: <span style="color:#e6db74">&#39;kevin&#39;</span>, <span style="color:#e6db74">&#39;sex&#39;</span>: <span style="color:#e6db74">&#39;male&#39;</span>, <span style="color:#e6db74">&#39;age&#39;</span>: <span style="color:#ae81ff">18</span>, <span style="color:#e6db74">&#39;dep_id&#39;</span>: <span style="color:#ae81ff">201</span>}, {<span style="color:#e6db74">&#39;id&#39;</span>: <span style="color:#ae81ff">4</span>, <span style="color:#e6db74">&#39;name&#39;</span>: <span style="color:#e6db74">&#39;nick&#39;</span>, <span style="color:#e6db74">&#39;sex&#39;</span>: <span style="color:#e6db74">&#39;male&#39;</span>, <span style="color:#e6db74">&#39;age&#39;</span>: <span style="color:#ae81ff">28</span>, <span style="color:#e6db74">&#39;dep_id&#39;</span>: <span style="color:#ae81ff">202</span>}, {<span style="color:#e6db74">&#39;id&#39;</span>: <span style="color:#ae81ff">5</span>, <span style="color:#e6db74">&#39;name&#39;</span>: <span style="color:#e6db74">&#39;owen&#39;</span>, <span style="color:#e6db74">&#39;sex&#39;</span>: <span style="color:#e6db74">&#39;male&#39;</span>, <span style="color:#e6db74">&#39;age&#39;</span>: <span style="color:#ae81ff">18</span>, <span style="color:#e6db74">&#39;dep_id&#39;</span>: <span style="color:#ae81ff">203</span>}, {<span style="color:#e6db74">&#39;id&#39;</span>: <span style="color:#ae81ff">6</span>, <span style="color:#e6db74">&#39;name&#39;</span>: <span style="color:#e6db74">&#39;jerry&#39;</span>, <span style="color:#e6db74">&#39;sex&#39;</span>: <span style="color:#e6db74">&#39;female&#39;</span>, <span style="color:#e6db74">&#39;age&#39;</span>: <span style="color:#ae81ff">18</span>, <span style="color:#e6db74">&#39;dep_id&#39;</span>: <span style="color:#ae81ff">204</span>}]
</span></span><span style="display:flex;"><span>[]
</span></span><span style="display:flex;"><span>[]
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">这里需要注意游标的特性类似于文件的光标，当第一次数据集直接取完，后面也就取不到了，接下来使用cursor.scroll()改变游标位置
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1.</span> 第一种使用方式
</span></span><span style="display:flex;"><span>res <span style="color:#f92672">=</span> cursor<span style="color:#f92672">.</span>fetchone()
</span></span><span style="display:flex;"><span>cursor<span style="color:#f92672">.</span>scroll(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;relative&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># res接收数据值后，scroll回滚-1回到取值之前的位置，负数往回滚，整数向前滚</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2.</span> 第二种使用方式
</span></span><span style="display:flex;"><span>res1 <span style="color:#f92672">=</span> cursor<span style="color:#f92672">.</span>fetchall()
</span></span><span style="display:flex;"><span>cursor<span style="color:#f92672">.</span>scroll(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;absolute&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 每次fetchall()接收完数据值后都可以通过absolute回到最开始位置</span>
</span></span></code></pre></div><ul>
<li>多表查询联系题</li>
</ul>
<blockquote>
<p>在整理好思路的前提下 一步一步写</p>
</blockquote>
<p>1、查询所有的课程的名称以及对应的任课老师姓名</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> cname,teacher.tname <span style="color:#66d9ef">from</span> course <span style="color:#66d9ef">inner</span> <span style="color:#66d9ef">join</span> teacher <span style="color:#66d9ef">on</span> course.teacher_id <span style="color:#f92672">=</span> teacher.tid
</span></span></code></pre></div><p>2、查询平均成绩大于八十分的同学的姓名和平均成绩</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> student.sname, t1.avg_num <span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">inner</span> <span style="color:#66d9ef">join</span>  (<span style="color:#66d9ef">select</span> student_id, <span style="color:#66d9ef">avg</span>(num) <span style="color:#66d9ef">as</span> avg_num <span style="color:#66d9ef">from</span> score  <span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> student_id <span style="color:#66d9ef">HAVING</span> avg_num <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">80</span>) <span style="color:#66d9ef">AS</span> t1 <span style="color:#66d9ef">on</span> t1.student_id <span style="color:#f92672">=</span> student.sid
</span></span></code></pre></div><p>3、查询没有报李平老师课的学生姓名</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> sname <span style="color:#66d9ef">from</span> student <span style="color:#66d9ef">WHERE</span> sid <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">in</span> (<span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">DISTINCT</span> student_id <span style="color:#66d9ef">FROM</span> score <span style="color:#66d9ef">where</span> score.course_id <span style="color:#66d9ef">in</span> (<span style="color:#66d9ef">SELECT</span> cid <span style="color:#66d9ef">from</span> course <span style="color:#66d9ef">where</span> teacher_id <span style="color:#f92672">=</span> (<span style="color:#66d9ef">select</span> tid <span style="color:#66d9ef">from</span> teacher <span style="color:#66d9ef">where</span> tname <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;李平老师&#39;</span>)) <span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> student_id)
</span></span></code></pre></div><p>4、查询没有同时选修物理课程和体育课程的学生姓名</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> sname <span style="color:#66d9ef">from</span> student, (<span style="color:#66d9ef">SELECT</span> t1.student_id,GROUP_CONCAT(t1.course_id) <span style="color:#66d9ef">as</span> count_num <span style="color:#66d9ef">from</span> (<span style="color:#66d9ef">SELECT</span> student_id,course_id <span style="color:#66d9ef">from</span> score <span style="color:#66d9ef">WHERE</span> course_id <span style="color:#66d9ef">in</span> (<span style="color:#66d9ef">SELECT</span> cid <span style="color:#66d9ef">from</span> course <span style="color:#66d9ef">where</span> cid <span style="color:#66d9ef">in</span> (<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>))) <span style="color:#66d9ef">as</span> t1 <span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> t1.student_id <span style="color:#66d9ef">HAVING</span> <span style="color:#66d9ef">LENGTH</span>(count_num) <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">2</span>) <span style="color:#66d9ef">as</span> t2 <span style="color:#66d9ef">where</span> student.sid <span style="color:#f92672">=</span> t2.student_id
</span></span></code></pre></div><p>5、查询挂科超过两门(包括两门)的学生姓名和班级</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> t1.sname,caption <span style="color:#66d9ef">from</span> <span style="color:#66d9ef">class</span> <span style="color:#66d9ef">inner</span> <span style="color:#66d9ef">JOIN</span> (<span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> student, (<span style="color:#66d9ef">SELECT</span> student_id,GROUP_CONCAT(course_id) <span style="color:#66d9ef">as</span> a <span style="color:#66d9ef">from</span> score <span style="color:#66d9ef">where</span> num <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">60</span> <span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> student_id <span style="color:#66d9ef">HAVING</span> <span style="color:#66d9ef">LENGTH</span>(a) <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">2</span>) <span style="color:#66d9ef">as</span> t1 <span style="color:#66d9ef">where</span> student.sid <span style="color:#f92672">=</span> t1.student_id) <span style="color:#66d9ef">as</span> t1 <span style="color:#66d9ef">on</span> t1.class_id <span style="color:#f92672">=</span> <span style="color:#66d9ef">class</span>.cid
</span></span></code></pre></div>
  
  </div>
</article>


    <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2022  self-salvation 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts/">All posts</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/python">Python</a></li>
         
        <li><a href="/databases">databases</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
</html>
